{% extends "base.html" %}
{% load socialaccount %}
{% block title %}forbind konti · freudd{% endblock %}
{% block content %}
<div class="card auth-shell">
  <h1 class="auth-title">forbind konti</h1>
  <p class="muted auth-subtitle">Kobl din konto til Google, så du kan logge ind uden adgangskode næste gang.</p>

  {% if form.accounts %}
  <p class="muted">Forbundne konti:</p>
  <form method="post" action="{% url 'socialaccount_connections' %}" class="form-stack">
    {% csrf_token %}
    {% for connected_account in form.accounts %}
      {% with provider_account=connected_account.get_provider_account %}
      <p>
        <label>
          <input type="radio" name="account" value="{{ connected_account.id }}" {% if forloop.first %}checked{% endif %} />
          {{ provider_account }} ({{ provider_account.get_brand.name }})
        </label>
      </p>
      {% endwith %}
    {% endfor %}
    <button class="nav-action" type="submit">Fjern valgt forbindelse</button>
  </form>
  {% else %}
  <p class="muted">Du har endnu ingen tredjeparts-konti forbundet.</p>
  {% endif %}

  {% if google_auth_enabled %}
  <form method="post" action="{% provider_login_url 'google' process='connect' %}" class="form-stack">
    {% csrf_token %}
    <button class="btn-primary" type="submit">Forbind Google-konto</button>
  </form>
  {% endif %}
</div>
{% endblock %}
